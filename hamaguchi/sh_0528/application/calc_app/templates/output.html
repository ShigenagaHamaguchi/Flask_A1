{% extends "layout.html" %}

{% block body %}
<script>
    // 非同期関数を定義する
    const tax_rate = async (event) => {
        // eventオブジェクトから給与の値を取得する
    
        const salary= document.getElementById("sb").value;
        console.log(salary);

        const response = await fetch("http://127.0.0.1:5000/tax_rate?salary=" + salary);

            console.log(response)
        if (response.status === 200) {
            const data = await response.json();
            console.log(data);
            const element = document.getElementById("taxrate");
            element.innerHTML = `${data.tax_rate}`;
        }
    };


</script>
<h1>給与と手取り</h1>
<h2>給与:<div id="salary">{{salary}}<div>
</h2>

<h2>手取り:{{payamount}}</h2>
<h2>税額:{{salary - payamount}}</h2>
<a class="btn btn-primary btn-block" href="{{url_for('calc_app')}}">戻る</a>
<button id="sb" type="button" class="btn btn-primary btn-block" value="{{salary}}" onclick="tax_rate()">不服</button>
<p></p>
<div id="taxrate"></div>

{% endblock %}